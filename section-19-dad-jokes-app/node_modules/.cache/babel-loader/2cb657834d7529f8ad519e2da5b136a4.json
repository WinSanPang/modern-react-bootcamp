{"ast":null,"code":"var _jsxFileName = \"/Users/win/modern-react-bootcamp/section-19-dad-jokes-app/src/JokeList.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport './JokeList.css';\nimport Joke from './Joke';\nconst API_URL = 'https://icanhazdadjoke.com/';\n\nclass JokeList extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      jokes: JSON.parse(window.localStorage.getItem('jokes') || '[]')\n    };\n\n    this.getJokesHandler = async () => {\n      let jokes = [];\n\n      while (jokes.length < this.props.numOfJokes) {\n        let response = await axios.get(API_URL, {\n          headers: {\n            Accept: 'application/json'\n          }\n        });\n        jokes.push({\n          id: response.data.id,\n          text: response.data.joke,\n          votes: 0\n        });\n      }\n\n      this.setState({\n        jokes: jokes\n      });\n      window.localStorage.setItem('jokes', JSON.stringify(jokes));\n    };\n\n    this.voteHandler = (id, delta) => {\n      this.setState(st => ({\n        jokes: st.jokes.map(jk => jk.id === id ? { ...jk,\n          votes: jk.votes + delta\n        } : jk)\n      }));\n    };\n  }\n\n  async componentDidMount() {\n    if (this.state.jokes.length === 0) this.getJokesHandler();\n  }\n\n  render() {\n    const jokeList = this.state.jokes.map(jk => /*#__PURE__*/React.createElement(Joke, {\n      votes: jk.votes,\n      text: jk.text,\n      key: jk.id,\n      upVote: () => this.voteHandler(jk.id, 1),\n      downVote: () => this.voteHandler(jk.id, -1),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 7\n      }\n    }));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"JokeList\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"JokeList-Sidebar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"JokeList-Title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }\n    }, \"DAD Jokes\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: \"https://assets.dryicons.com/uploads/icon/svg/8927/0eb14c71-38f2-433a-bfc8-23d9c99b3647.svg\",\n      alt: \"laughing-emoji\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"JokeList-GetMore\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }\n    }, \"New Jokes\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"JokeList-Jokes\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    }, jokeList));\n  }\n\n}\n\nJokeList.defaultProps = {\n  numOfJokes: 10\n};\nexport default JokeList;","map":{"version":3,"sources":["/Users/win/modern-react-bootcamp/section-19-dad-jokes-app/src/JokeList.js"],"names":["React","Component","axios","Joke","API_URL","JokeList","state","jokes","JSON","parse","window","localStorage","getItem","getJokesHandler","length","props","numOfJokes","response","get","headers","Accept","push","id","data","text","joke","votes","setState","setItem","stringify","voteHandler","delta","st","map","jk","componentDidMount","render","jokeList","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nimport './JokeList.css';\nimport Joke from './Joke';\n\nconst API_URL = 'https://icanhazdadjoke.com/'\nclass JokeList extends Component {\n  static defaultProps = {\n    numOfJokes: 10\n  }\n\n  state = {\n    jokes: JSON.parse(window.localStorage.getItem('jokes') || '[]')\n};\n\n  async componentDidMount(){\n    if (this.state.jokes.length === 0) this.getJokesHandler();\n  }\n\n  getJokesHandler = async () => {\n    let jokes = [];\n    while(jokes.length < this.props.numOfJokes){\n      let response = await axios.get(API_URL, {headers: {Accept: 'application/json'}});\n      jokes.push({id: response.data.id, text: response.data.joke, votes: 0});\n    }\n    this.setState({jokes: jokes});\n    window.localStorage.setItem(\n      'jokes',\n      JSON.stringify(jokes)\n    );\n  }\n  \n  voteHandler = (id, delta) => {\n    this.setState(\n      st => ({\n        jokes: st.jokes.map(jk => \n          jk.id === id ? {...jk, votes: jk.votes + delta} : jk\n          )\n      }));\n  }\n\n  render(){\n    const jokeList = this.state.jokes.map(jk => (\n      <Joke \n        votes={jk.votes} \n        text={jk.text} \n        key={jk.id} \n        upVote={() => this.voteHandler(jk.id, 1)}\n        downVote={() => this.voteHandler(jk.id, -1)}\n      />\n    ));\n\n    return (\n      <div className='JokeList'>\n        <div className='JokeList-Sidebar'>\n          <h1 className='JokeList-Title'>DAD Jokes</h1>\n          <img src='https://assets.dryicons.com/uploads/icon/svg/8927/0eb14c71-38f2-433a-bfc8-23d9c99b3647.svg' alt='laughing-emoji'/>\n          <button className='JokeList-GetMore'>New Jokes</button>\n        </div>\n        <div className='JokeList-Jokes'>\n          {jokeList}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default JokeList;"]},"metadata":{},"sourceType":"module"}