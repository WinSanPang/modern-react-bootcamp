{"ast":null,"code":"var _jsxFileName = \"/Users/win/modern-react-bootcamp/section-19-dad-jokes-app/src/JokeList.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport './JokeList.css';\nimport Joke from './Joke';\nconst API_URL = 'https://icanhazdadjoke.com/';\n\nclass JokeList extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      jokes: JSON.parse(window.localStorage.getItem('jokes') || '[]'),\n      loading: false\n    };\n\n    this.getJokesHandler = async () => {\n      try {\n        let jokes = [];\n        const seenJokes = new Set(this.state.jokes.map(jk => jk.text));\n\n        while (jokes.length < this.props.numOfJokes) {\n          let response = await axios.get(API_URL, {\n            headers: {\n              Accept: 'application/json'\n            }\n          });\n          let newJoke = response.data.joke;\n\n          if (!seenJokes.has(newJoke)) {\n            jokes.push({\n              id: response.data.id,\n              text: newJoke,\n              votes: 0\n            });\n          } else {\n            console.log('Found Duplicate', newJoke);\n          }\n        }\n\n        this.setState(st => ({\n          loading: false,\n          jokes: [...st.jokes, ...jokes]\n        }), () => window.localStorage.setItem('jokes', JSON.stringify(this.state.jokes)));\n        window.localStorage.setItem('jokes', JSON.stringify(jokes));\n      } catch (err) {\n        alert(err);\n        this.setState({\n          loading: false\n        });\n      }\n    };\n\n    this.voteHandler = (id, delta) => {\n      this.setState(st => ({\n        jokes: st.jokes.map(jk => jk.id === id ? { ...jk,\n          votes: jk.votes + delta\n        } : jk)\n      }), () => window.localStorage.setItem('jokes', JSON.stringify(this.state.jokes)));\n    };\n\n    this.getMoreHandler = () => {\n      this.setState({\n        loading: true\n      }, this.getJokesHandler);\n    };\n  }\n\n  componentDidMount() {\n    if (this.state.jokes.length === 0) this.getJokesHandler();\n  }\n\n  render() {\n    let jokeList = this.state.jokes.map(jk => /*#__PURE__*/React.createElement(Joke, {\n      votes: jk.votes,\n      text: jk.text,\n      key: jk.id,\n      upVote: () => this.voteHandler(jk.id, 1),\n      downVote: () => this.voteHandler(jk.id, -1),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }\n    }));\n\n    if (this.state.loading) {\n      jokeList = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"JokeList-Spinner\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"far fa-8x fa-laugh fa-spin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }\n      }, \"Loading Jokes...\"));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"JokeList\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"JokeList-Sidebar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"JokeList-Title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }, \"DAD Jokes\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: \"https://assets.dryicons.com/uploads/icon/svg/8927/0eb14c71-38f2-433a-bfc8-23d9c99b3647.svg\",\n      alt: \"laughing-emoji\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"JokeList-GetMore\",\n      onClick: this.getMoreHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }, \"New Jokes\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"JokeList-Jokes\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }, jokeList));\n  }\n\n}\n\nJokeList.defaultProps = {\n  numOfJokes: 10\n};\nexport default JokeList;","map":{"version":3,"sources":["/Users/win/modern-react-bootcamp/section-19-dad-jokes-app/src/JokeList.js"],"names":["React","Component","axios","Joke","API_URL","JokeList","state","jokes","JSON","parse","window","localStorage","getItem","loading","getJokesHandler","seenJokes","Set","map","jk","text","length","props","numOfJokes","response","get","headers","Accept","newJoke","data","joke","has","push","id","votes","console","log","setState","st","setItem","stringify","err","alert","voteHandler","delta","getMoreHandler","componentDidMount","render","jokeList","defaultProps"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,gBAAP;AACA,OAAOC,IAAP,MAAiB,QAAjB;AAEA,MAAMC,OAAO,GAAG,6BAAhB;;AACA,MAAMC,QAAN,SAAuBJ,SAAvB,CAAiC;AAAA;AAAA;AAAA,SAK/BK,KAL+B,GAKvB;AACNC,MAAAA,KAAK,EAAEC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,KAAwC,IAAnD,CADD;AAENC,MAAAA,OAAO,EAAE;AAFH,KALuB;;AAAA,SAc/BC,eAd+B,GAcb,YAAY;AAC5B,UAAI;AACF,YAAIP,KAAK,GAAG,EAAZ;AACA,cAAMQ,SAAS,GAAG,IAAIC,GAAJ,CAAQ,KAAKV,KAAL,CAAWC,KAAX,CAAiBU,GAAjB,CAAqBC,EAAE,IAAIA,EAAE,CAACC,IAA9B,CAAR,CAAlB;;AAEA,eAAMZ,KAAK,CAACa,MAAN,GAAe,KAAKC,KAAL,CAAWC,UAAhC,EAA2C;AACzC,cAAIC,QAAQ,GAAG,MAAMrB,KAAK,CAACsB,GAAN,CAAUpB,OAAV,EAAmB;AAACqB,YAAAA,OAAO,EAAE;AAACC,cAAAA,MAAM,EAAE;AAAT;AAAV,WAAnB,CAArB;AACA,cAAIC,OAAO,GAAGJ,QAAQ,CAACK,IAAT,CAAcC,IAA5B;;AACA,cAAG,CAACd,SAAS,CAACe,GAAV,CAAcH,OAAd,CAAJ,EAA2B;AAC3BpB,YAAAA,KAAK,CAACwB,IAAN,CAAW;AAACC,cAAAA,EAAE,EAAET,QAAQ,CAACK,IAAT,CAAcI,EAAnB;AAAuBb,cAAAA,IAAI,EAAEQ,OAA7B;AAAsCM,cAAAA,KAAK,EAAE;AAA7C,aAAX;AACD,WAFC,MAEK;AACLC,YAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BR,OAA/B;AACD;AACF;;AACC,aAAKS,QAAL,CAAcC,EAAE,KAAK;AACnBxB,UAAAA,OAAO,EAAE,KADU;AAEnBN,UAAAA,KAAK,EAAE,CAAC,GAAG8B,EAAE,CAAC9B,KAAP,EAAc,GAAGA,KAAjB;AAFY,SAAL,CAAhB,EAIA,MAAMG,MAAM,CAACC,YAAP,CAAoB2B,OAApB,CAA4B,OAA5B,EAAqC9B,IAAI,CAAC+B,SAAL,CAAe,KAAKjC,KAAL,CAAWC,KAA1B,CAArC,CAJN;AAMAG,QAAAA,MAAM,CAACC,YAAP,CAAoB2B,OAApB,CACE,OADF,EAEE9B,IAAI,CAAC+B,SAAL,CAAehC,KAAf,CAFF;AAID,OAvBD,CAuBE,OAAMiC,GAAN,EAAU;AACVC,QAAAA,KAAK,CAACD,GAAD,CAAL;AACA,aAAKJ,QAAL,CAAc;AAACvB,UAAAA,OAAO,EAAE;AAAV,SAAd;AACD;AACF,KA1C8B;;AAAA,SA4C/B6B,WA5C+B,GA4CjB,CAACV,EAAD,EAAKW,KAAL,KAAe;AAC3B,WAAKP,QAAL,CACEC,EAAE,KAAK;AACL9B,QAAAA,KAAK,EAAE8B,EAAE,CAAC9B,KAAH,CAASU,GAAT,CAAaC,EAAE,IACpBA,EAAE,CAACc,EAAH,KAAUA,EAAV,GAAe,EAAC,GAAGd,EAAJ;AAAQe,UAAAA,KAAK,EAAEf,EAAE,CAACe,KAAH,GAAWU;AAA1B,SAAf,GAAkDzB,EAD7C;AADF,OAAL,CADJ,EAME,MAAMR,MAAM,CAACC,YAAP,CAAoB2B,OAApB,CAA4B,OAA5B,EAAqC9B,IAAI,CAAC+B,SAAL,CAAe,KAAKjC,KAAL,CAAWC,KAA1B,CAArC,CANR;AAQD,KArD8B;;AAAA,SAuD/BqC,cAvD+B,GAuDd,MAAM;AACrB,WAAKR,QAAL,CAAc;AAACvB,QAAAA,OAAO,EAAE;AAAV,OAAd,EAA+B,KAAKC,eAApC;AACD,KAzD8B;AAAA;;AAU/B+B,EAAAA,iBAAiB,GAAE;AACjB,QAAI,KAAKvC,KAAL,CAAWC,KAAX,CAAiBa,MAAjB,KAA4B,CAAhC,EAAmC,KAAKN,eAAL;AACpC;;AA+CDgC,EAAAA,MAAM,GAAE;AACN,QAAIC,QAAQ,GAAG,KAAKzC,KAAL,CAAWC,KAAX,CAAiBU,GAAjB,CAAqBC,EAAE,iBACpC,oBAAC,IAAD;AACE,MAAA,KAAK,EAAEA,EAAE,CAACe,KADZ;AAEE,MAAA,IAAI,EAAEf,EAAE,CAACC,IAFX;AAGE,MAAA,GAAG,EAAED,EAAE,CAACc,EAHV;AAIE,MAAA,MAAM,EAAE,MAAM,KAAKU,WAAL,CAAiBxB,EAAE,CAACc,EAApB,EAAwB,CAAxB,CAJhB;AAKE,MAAA,QAAQ,EAAE,MAAM,KAAKU,WAAL,CAAiBxB,EAAE,CAACc,EAApB,EAAwB,CAAC,CAAzB,CALlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADa,CAAf;;AAUA,QAAI,KAAK1B,KAAL,CAAWO,OAAf,EAAuB;AACrBkC,MAAAA,QAAQ,gBACN;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAG,QAAA,SAAS,EAAC,4BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAFF,CADF;AAMD;;AAED,wBACE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,gBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAK,MAAA,GAAG,EAAC,4FAAT;AAAsG,MAAA,GAAG,EAAC,gBAA1G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAGE;AAAQ,MAAA,SAAS,EAAC,kBAAlB;AAAqC,MAAA,OAAO,EAAE,KAAKH,cAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAHF,CADF,eAME;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGG,QADH,CANF,CADF;AAYD;;AA3F8B;;AAA3B1C,Q,CACG2C,Y,GAAe;AACpB1B,EAAAA,UAAU,EAAE;AADQ,C;AA6FxB,eAAejB,QAAf","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nimport './JokeList.css';\nimport Joke from './Joke';\n\nconst API_URL = 'https://icanhazdadjoke.com/'\nclass JokeList extends Component {\n  static defaultProps = {\n    numOfJokes: 10\n  }\n\n  state = {\n    jokes: JSON.parse(window.localStorage.getItem('jokes') || '[]'),\n    loading: false\n};\n\n  componentDidMount(){\n    if (this.state.jokes.length === 0) this.getJokesHandler();\n  }\n\n  getJokesHandler = async () => {\n    try {\n      let jokes = [];\n      const seenJokes = new Set(this.state.jokes.map(jk => jk.text));\n\n      while(jokes.length < this.props.numOfJokes){\n        let response = await axios.get(API_URL, {headers: {Accept: 'application/json'}});\n        let newJoke = response.data.joke;\n        if(!seenJokes.has(newJoke)){\n        jokes.push({id: response.data.id, text: newJoke, votes: 0});\n      } else {\n        console.log('Found Duplicate', newJoke);\n      }\n    }\n      this.setState(st => ({\n        loading: false,\n        jokes: [...st.jokes, ...jokes]\n      }),\n      () => window.localStorage.setItem('jokes', JSON.stringify(this.state.jokes))\n      );\n      window.localStorage.setItem(\n        'jokes',\n        JSON.stringify(jokes)\n      );\n    } catch(err){\n      alert(err);\n      this.setState({loading: false})\n    }\n  }\n  \n  voteHandler = (id, delta) => {\n    this.setState(\n      st => ({\n        jokes: st.jokes.map(jk => \n          jk.id === id ? {...jk, votes: jk.votes + delta} : jk\n          )\n      }),\n      () => window.localStorage.setItem('jokes', JSON.stringify(this.state.jokes))\n      );\n  }\n\n  getMoreHandler = () => {\n    this.setState({loading: true}, this.getJokesHandler);\n  }\n\n  render(){\n    let jokeList = this.state.jokes.map(jk => (\n      <Joke \n        votes={jk.votes} \n        text={jk.text} \n        key={jk.id} \n        upVote={() => this.voteHandler(jk.id, 1)}\n        downVote={() => this.voteHandler(jk.id, -1)}\n      />\n    ));\n\n    if (this.state.loading){\n      jokeList = (\n        <div className='JokeList-Spinner'>\n          <i className='far fa-8x fa-laugh fa-spin' />\n          <h1>Loading Jokes...</h1>\n        </div>\n      );\n    }\n\n    return (\n      <div className='JokeList'>\n        <div className='JokeList-Sidebar'>\n          <h1 className='JokeList-Title'>DAD Jokes</h1>\n          <img src='https://assets.dryicons.com/uploads/icon/svg/8927/0eb14c71-38f2-433a-bfc8-23d9c99b3647.svg' alt='laughing-emoji'/>\n          <button className='JokeList-GetMore' onClick={this.getMoreHandler}>New Jokes</button>\n        </div>\n        <div className='JokeList-Jokes'>\n          {jokeList}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default JokeList;"]},"metadata":{},"sourceType":"module"}