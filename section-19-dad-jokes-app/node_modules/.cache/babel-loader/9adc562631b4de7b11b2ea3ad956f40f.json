{"ast":null,"code":"var _jsxFileName = \"/Users/win/modern-react-bootcamp/section-19-dad-jokes-app/src/JokeList.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport './JokeList.css';\nimport Joke from './Joke';\nconst API_URL = 'https://icanhazdadjoke.com/';\n\nclass JokeList extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      jokes: JSON.parse(window.localStorage.getItem('jokes') || '[]'),\n      loading: false\n    };\n\n    this.getJokesHandler = async () => {\n      let jokes = [];\n\n      while (jokes.length < this.props.numOfJokes) {\n        let response = await axios.get(API_URL, {\n          headers: {\n            Accept: 'application/json'\n          }\n        });\n        let newJoke = response.data.joke;\n\n        if (!this.seenJokes.has(newJoke)) {\n          jokes.push({\n            id: response.data.id,\n            text: newJoke,\n            votes: 0\n          });\n        } else {\n          console.log('Found Duplicate', newJoke);\n        }\n\n        this.setState(st => ({\n          loading: false,\n          jokes: [...st.jokes, ...jokes]\n        }), () => window.localStorage.setItem('jokes', JSON.stringify(this.state.jokes)));\n        window.localStorage.setItem('jokes', JSON.stringify(jokes));\n      }\n\n      voteHandler = (id, delta) => {\n        this.setState(st => ({\n          jokes: st.jokes.map(jk => jk.id === id ? { ...jk,\n            votes: jk.votes + delta\n          } : jk)\n        }), () => window.localStorage.setItem('jokes', JSON.stringify(this.state.jokes)));\n      };\n\n      getMoreHandler = () => {\n        this.setState({\n          loading: true\n        }, this.getJokesHandler);\n      };\n\n      render();\n      let jokeList = this.state.jokes.map(jk => /*#__PURE__*/React.createElement(Joke, {\n        votes: jk.votes,\n        text: jk.text,\n        key: jk.id,\n        upVote: () => this.voteHandler(jk.id, 1),\n        downVote: () => this.voteHandler(jk.id, -1),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 7\n        }\n      }));\n\n      if (this.state.loading) {\n        jokeList = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"JokeList-Spinner\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"far fa-8x fa-laugh fa-spin\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(\"h1\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 11\n          }\n        }, \"Loading Jokes...\"));\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"JokeList\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"JokeList-Sidebar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"JokeList-Title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }\n      }, \"DAD Jokes\"), /*#__PURE__*/React.createElement(\"img\", {\n        src: \"https://assets.dryicons.com/uploads/icon/svg/8927/0eb14c71-38f2-433a-bfc8-23d9c99b3647.svg\",\n        alt: \"laughing-emoji\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"JokeList-GetMore\",\n        onClick: this.getMoreHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }\n      }, \"New Jokes\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"JokeList-Jokes\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 9\n        }\n      }, jokeList));\n    };\n  }\n\n  componentDidMount() {\n    const seenJokes = new Set(this.state.jokes.map(jk => jk.text));\n    console.log(seenJokes);\n    if (this.state.jokes.length === 0) this.getJokesHandler();\n  }\n\n}\n\nJokeList.defaultProps = {\n  numOfJokes: 10\n};\nexport default JokeList;","map":{"version":3,"sources":["/Users/win/modern-react-bootcamp/section-19-dad-jokes-app/src/JokeList.js"],"names":["React","Component","axios","Joke","API_URL","JokeList","state","jokes","JSON","parse","window","localStorage","getItem","loading","getJokesHandler","length","props","numOfJokes","response","get","headers","Accept","newJoke","data","joke","seenJokes","has","push","id","text","votes","console","log","setState","st","setItem","stringify","voteHandler","delta","map","jk","getMoreHandler","render","jokeList","componentDidMount","Set","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nimport './JokeList.css';\nimport Joke from './Joke';\n\nconst API_URL = 'https://icanhazdadjoke.com/'\nclass JokeList extends Component {\n  static defaultProps = {\n    numOfJokes: 10\n  }\n\n  state = {\n    jokes: JSON.parse(window.localStorage.getItem('jokes') || '[]'),\n    loading: false\n};\n\n  componentDidMount(){\n    const seenJokes = new Set(this.state.jokes.map(jk => jk.text));\n    console.log(seenJokes);\n    if (this.state.jokes.length === 0) this.getJokesHandler();\n  }\n\n  getJokesHandler = async () => {\n    let jokes = [];\n    while(jokes.length < this.props.numOfJokes){\n      let response = await axios.get(API_URL, {headers: {Accept: 'application/json'}});\n      let newJoke = response.data.joke;\n      if(!this.seenJokes.has(newJoke)){\n      jokes.push({id: response.data.id, text: newJoke, votes: 0});\n    } else {\n      console.log('Found Duplicate', newJoke);\n    }\n    this.setState(st => ({\n      loading: false,\n      jokes: [...st.jokes, ...jokes]\n    }),\n    () => window.localStorage.setItem('jokes', JSON.stringify(this.state.jokes))\n    );\n    window.localStorage.setItem(\n      'jokes',\n      JSON.stringify(jokes)\n    );\n  }\n  \n  voteHandler = (id, delta) => {\n    this.setState(\n      st => ({\n        jokes: st.jokes.map(jk => \n          jk.id === id ? {...jk, votes: jk.votes + delta} : jk\n          )\n      }),\n      () => window.localStorage.setItem('jokes', JSON.stringify(this.state.jokes))\n      );\n  }\n\n  getMoreHandler = () => {\n    this.setState({loading: true}, this.getJokesHandler);\n  }\n\n  render()\n    let jokeList = this.state.jokes.map(jk => (\n      <Joke \n        votes={jk.votes} \n        text={jk.text} \n        key={jk.id} \n        upVote={() => this.voteHandler(jk.id, 1)}\n        downVote={() => this.voteHandler(jk.id, -1)}\n      />\n    ));\n\n    if (this.state.loading){\n      jokeList = (\n        <div className='JokeList-Spinner'>\n          <i className='far fa-8x fa-laugh fa-spin' />\n          <h1>Loading Jokes...</h1>\n        </div>\n      );\n    }\n\n    return (\n      <div className='JokeList'>\n        <div className='JokeList-Sidebar'>\n          <h1 className='JokeList-Title'>DAD Jokes</h1>\n          <img src='https://assets.dryicons.com/uploads/icon/svg/8927/0eb14c71-38f2-433a-bfc8-23d9c99b3647.svg' alt='laughing-emoji'/>\n          <button className='JokeList-GetMore' onClick={this.getMoreHandler}>New Jokes</button>\n        </div>\n        <div className='JokeList-Jokes'>\n          {jokeList}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default JokeList;"]},"metadata":{},"sourceType":"module"}